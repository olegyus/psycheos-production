"""Screen v2 weight matrices.

PHASE1_SCREENS  — 6 fixed Phase 1 screens with per-option axis/layer weights.
PHASE2_TEMPLATES — 20 diagnostic nodes (A×L) for Phase 2/3 adaptive questions.

Weight value range: {−0.8, −0.7, −0.6, −0.5, −0.4, −0.3, −0.2, 0, +0.2, +0.3, +0.4, +0.5, +0.6, +0.7, +0.8}
Axes:  A1 (Активация), A2 (Неопределённость), A3 (Импульс), A4 (Временная ориентация)
Layers: L0 (энергетический), L1 (поведенческий), L2 (аффективный),
        L3 (социальный), L4 (когнитивный)
"""

# ---------------------------------------------------------------------------
# Phase 1 — 6 fixed multi-select screens
# ---------------------------------------------------------------------------

PHASE1_SCREENS: list[dict] = [
    # ------------------------------------------------------------------
    # Screen 1 — Activation under fatigue
    # ------------------------------------------------------------------
    {
        "screen_id": "P1_01",
        "question": (
            "Когда вы устали, но при этом есть важное дело, "
            "что из этого чаще всего с вами происходит?"
        ),
        "type": "multi_select",
        "options": [
            {
                "text": "Я всё равно начинаю делать, даже через силу",
                "axis_weights": {"A1": +0.5, "A3": +0.3, "A4": +0.4},
                "layer_weights": {"L0": +0.3, "L1": +0.6, "L2": +0.2},
            },
            {
                "text": "Я откладываю, потому что понимаю, что сейчас не в ресурсе",
                "axis_weights": {"A1": -0.5, "A4": -0.4},
                "layer_weights": {"L0": +0.6, "L1": -0.4},
            },
            {
                "text": "Я начинаю делать, но быстро переключаюсь на что-то другое",
                "axis_weights": {"A3": -0.6, "A4": -0.3},
                "layer_weights": {"L1": +0.5, "L2": +0.3},
            },
            {
                "text": "Я долго думаю, стоит ли начинать",
                "axis_weights": {"A3": +0.4, "A4": -0.2},
                "layer_weights": {"L4": +0.7, "L2": +0.2},
            },
            {
                "text": "Я сначала отвлекаюсь, чтобы стало легче",
                "axis_weights": {"A2": -0.4, "A4": -0.5},
                "layer_weights": {"L1": +0.3, "L2": +0.5},
            },
            {
                "text": "Я делаю небольшой шаг, чтобы сдвинуться с места",
                "axis_weights": {"A3": +0.6, "A4": +0.6},
                "layer_weights": {"L1": +0.5, "L4": +0.3},
            },
            {
                "text": "Я чувствую раздражение или внутреннее напряжение",
                "axis_weights": {"A1": +0.3, "A3": -0.2},
                "layer_weights": {"L0": +0.4, "L2": +0.6},
            },
        ],
    },
    # ------------------------------------------------------------------
    # Screen 2 — Response to uncertainty
    # ------------------------------------------------------------------
    {
        "screen_id": "P1_02",
        "question": (
            "Когда ситуация становится неопределённой, "
            "что из этого чаще всего с вами происходит?"
        ),
        "type": "multi_select",
        "options": [
            {
                "text": "Я начинаю представлять возможные негативные сценарии",
                "axis_weights": {"A2": -0.7},
                "layer_weights": {"L2": +0.6, "L4": +0.5},
            },
            {
                "text": "Мне хочется быстрее получить ясность",
                "axis_weights": {"A2": +0.3, "A3": +0.2},
                "layer_weights": {"L3": +0.6},
            },
            {
                "text": "Я стараюсь не думать об этом",
                "axis_weights": {"A2": -0.6},
                "layer_weights": {"L4": -0.4},
            },
            {
                "text": "Я начинаю прокручивать варианты и анализировать",
                "axis_weights": {"A2": -0.3},
                "layer_weights": {"L4": +0.8},
            },
            {
                "text": "Мне становится телесно напряжённо",
                "axis_weights": {"A2": -0.4},
                "layer_weights": {"L0": +0.8, "L2": +0.3},
            },
            {
                "text": "Мне становится интересно, чем это закончится",
                "axis_weights": {"A2": +0.7},
                "layer_weights": {"L2": +0.4},
            },
            {
                "text": "Я предпочитаю ничего не предпринимать",
                "axis_weights": {"A2": -0.5, "A3": +0.3},
                "layer_weights": {"L1": -0.5},
            },
            {
                "text": "Я всё равно делаю шаг, даже без гарантий",
                "axis_weights": {"A2": +0.8, "A4": +0.4},
                "layer_weights": {"L1": +0.6},
            },
        ],
    },
    # ------------------------------------------------------------------
    # Screen 3 — Response to unfair/harsh treatment
    # ------------------------------------------------------------------
    {
        "screen_id": "P1_03",
        "question": (
            "Когда с вами обходятся несправедливо или резко, "
            "что чаще всего происходит?"
        ),
        "type": "multi_select",
        "options": [
            {
                "text": "Я реагирую сразу, не задумываясь",
                "axis_weights": {"A3": -0.7},
                "layer_weights": {"L1": +0.6, "L2": +0.5},
            },
            {
                "text": "Я сдерживаюсь, но внутри остаётся напряжение",
                "axis_weights": {"A3": +0.6},
                "layer_weights": {"L2": +0.4, "L3": +0.3},
            },
            {
                "text": "Я позже долго прокручиваю ситуацию",
                "axis_weights": {"A3": +0.3, "A4": -0.3},
                "layer_weights": {"L4": +0.7, "L2": +0.4},
            },
            {
                "text": "Я стараюсь спокойно обсудить это",
                "axis_weights": {"A3": +0.4, "A2": +0.3},
                "layer_weights": {"L3": +0.6, "L4": +0.3},
            },
            {
                "text": "Я отстраняюсь или выхожу из контакта",
                "axis_weights": {"A3": +0.3, "A2": -0.4},
                "layer_weights": {"L3": -0.5},
            },
            {
                "text": "Я начинаю сомневаться в себе",
                "axis_weights": {"A2": -0.3},
                "layer_weights": {"L2": +0.5, "L4": +0.4},
            },
            {
                "text": "Мне сложно что-то почувствовать в этот момент",
                "axis_weights": {"A3": +0.2},
                "layer_weights": {"L2": -0.6, "L0": +0.3},
            },
        ],
    },
    # ------------------------------------------------------------------
    # Screen 4 — Future orientation (2-3 year horizon)
    # ------------------------------------------------------------------
    {
        "screen_id": "P1_04",
        "question": (
            "Когда вы думаете о своём будущем на 2–3 года вперёд, "
            "что чаще всего с вами происходит?"
        ),
        "type": "multi_select",
        "options": [
            {
                "text": "Я вижу несколько возможных направлений",
                "axis_weights": {"A4": +0.7},
                "layer_weights": {"L4": +0.8},
            },
            {
                "text": "У меня есть более-менее понятный ориентир",
                "axis_weights": {"A4": +0.8},
                "layer_weights": {"L4": +0.7},
            },
            {
                "text": "Образы расплывчатые, трудно представить",
                "axis_weights": {"A4": -0.5},
                "layer_weights": {"L4": -0.3},
            },
            {
                "text": "Возникает тревога или напряжение",
                "axis_weights": {"A4": -0.3},
                "layer_weights": {"L2": +0.6, "L0": +0.3},
            },
            {
                "text": "Я часто ловлю себя на мыслях: «Если бы тогда…»",
                "axis_weights": {"A4": -0.7},
                "layer_weights": {"L4": +0.8, "L2": +0.3},
            },
            {
                "text": "Мне сложно удерживать мысли о будущем",
                "axis_weights": {"A4": -0.6},
                "layer_weights": {"L4": -0.5},
            },
            {
                "text": "Я предпочитаю сосредотачиваться только на ближайшем времени",
                "axis_weights": {"A4": -0.6},
                "layer_weights": {"L4": -0.4},
            },
            {
                "text": "Будущее вызывает интерес",
                "axis_weights": {"A4": +0.6},
                "layer_weights": {"L2": +0.5},
            },
        ],
    },
    # ------------------------------------------------------------------
    # Screen 5 — Current energy state (last 1-2 weeks)
    # ------------------------------------------------------------------
    {
        "screen_id": "P1_05",
        "question": (
            "В последние 1–2 недели, что из этого чаще всего "
            "относится к вашему состоянию?"
        ),
        "type": "multi_select",
        "options": [
            {
                "text": "Энергии меньше, чем хотелось бы",
                "axis_weights": {"A1": -0.7},
                "layer_weights": {"L0": +0.8},
            },
            {
                "text": "Энергии больше, чем обычно",
                "axis_weights": {"A1": +0.7},
                "layer_weights": {"L0": +0.5},
            },
            {
                "text": "Бывают резкие перепады состояния",
                "axis_weights": {"A1": +0.3},
                "layer_weights": {"L0": +0.7, "L2": +0.4},
            },
            {
                "text": "Чувствую внутреннее напряжение даже без причины",
                "axis_weights": {"A1": +0.2},
                "layer_weights": {"L0": +0.5, "L2": +0.7},
            },
            {
                "text": "Состояние в целом ровное и стабильное",
                "axis_weights": {"A1": 0.0},
                "layer_weights": {"L0": +0.5},
            },
            {
                "text": "Трудно почувствовать, в каком я состоянии",
                "axis_weights": {"A1": 0.0},
                "layer_weights": {"L2": -0.5, "L0": +0.3},
            },
            {
                "text": "Мне часто нужно внешнее воздействие, чтобы включиться",
                "axis_weights": {"A1": -0.5},
                "layer_weights": {"L0": +0.4, "L3": +0.3},
            },
            {
                "text": "Мне трудно остановиться и расслабиться",
                "axis_weights": {"A1": +0.5},
                "layer_weights": {"L0": +0.6, "L2": +0.4},
            },
        ],
    },
    # ------------------------------------------------------------------
    # Screen 6 — Initiating contact under uncertainty
    # ------------------------------------------------------------------
    {
        "screen_id": "P1_06",
        "question": (
            "Если вам нужно первым выйти на связь и вы не уверены, "
            "как это будет воспринято, что чаще всего происходит?"
        ),
        "type": "multi_select",
        "options": [
            {
                "text": "Я пишу/говорю сразу, чтобы быстрее прояснить",
                "axis_weights": {"A2": +0.4, "A3": -0.3},
                "layer_weights": {"L3": +0.7},
            },
            {
                "text": "Я долго формулирую сообщение или прокручиваю разговор",
                "axis_weights": {"A3": +0.5, "A2": -0.3},
                "layer_weights": {"L4": +0.6},
            },
            {
                "text": "Я откладываю контакт, даже если лучше не тянуть",
                "axis_weights": {"A2": -0.6, "A4": -0.3},
                "layer_weights": {"L3": -0.5},
            },
            {
                "text": "Я ищу повод или удобный момент",
                "axis_weights": {"A2": -0.3, "A3": +0.3},
                "layer_weights": {"L3": +0.3, "L4": +0.4},
            },
            {
                "text": "Я чувствую напряжение или сомнение",
                "axis_weights": {"A2": -0.3},
                "layer_weights": {"L2": +0.6},
            },
            {
                "text": "Я заранее продумываю несколько сценариев ответа",
                "axis_weights": {"A2": -0.2, "A4": +0.3},
                "layer_weights": {"L4": +0.7},
            },
            {
                "text": "Я предпочитаю, чтобы инициатива была не с моей стороны",
                "axis_weights": {"A2": -0.5},
                "layer_weights": {"L3": -0.4},
            },
            {
                "text": "Я обычно действую спокойно и без лишнего напряжения",
                "axis_weights": {"A2": +0.5, "A3": +0.2},
                "layer_weights": {"L3": +0.5},
            },
        ],
    },
]


# ---------------------------------------------------------------------------
# Phase 2 — 20 diagnostic node templates (A×L)
# Each option carries a "split" tag: "H1" | "H2" | "conflict" | "neither"
# split_logic aggregates option indices by tag for routing logic.
# ---------------------------------------------------------------------------

def _build_split_logic(options: list[dict]) -> dict:
    """Derive split_logic from option split tags."""
    h1 = [o["text"] for o in options if o.get("split") == "H1"]
    h2 = [o["text"] for o in options if o.get("split") == "H2"]
    return {"H1_supported_by": h1, "H2_supported_by": h2}


def _node(
    node: str,
    diagnostic_split: str,
    reference_question: str,
    options: list[dict],
) -> dict:
    return {
        "node": node,
        "diagnostic_split": diagnostic_split,
        "reference_question": reference_question,
        "options": options,
        "split_logic": _build_split_logic(options),
    }


PHASE2_TEMPLATES: list[dict] = [
    # ---- A1 × L0 -------------------------------------------------------
    _node(
        "A1_L0",
        "первичная усталость vs устойчивый сниженный тонус",
        "Когда у вас появляется возможность нормально восстановиться, что происходит?",
        [
            {
                "text": "Энергия заметно возвращается",
                "axis_weights": {"A1": +0.5},
                "layer_weights": {"L0": +0.3},
                "split": "H1",
            },
            {
                "text": "Почти ничего не меняется",
                "axis_weights": {"A1": -0.6},
                "layer_weights": {"L0": +0.7},
                "split": "H2",
            },
            {
                "text": "Появляется тревожная активность",
                "axis_weights": {"A1": +0.4},
                "layer_weights": {"L0": +0.3, "L2": +0.5},
                "split": "conflict",
            },
            {
                "text": "Появляется желание что-то начать",
                "axis_weights": {"A1": +0.6},
                "layer_weights": {"L0": +0.2, "L1": +0.4},
                "split": "H1",
            },
            {
                "text": "Трудно почувствовать разницу",
                "axis_weights": {"A1": -0.3},
                "layer_weights": {"L2": -0.4},
                "split": "H2",
            },
        ],
    ),
    # ---- A1 × L1 -------------------------------------------------------
    _node(
        "A1_L1",
        "замедление vs избегающее торможение",
        "Если нужно включиться в действие, что чаще происходит?",
        [
            {
                "text": "Начинаю медленно, но вхожу в процесс",
                "axis_weights": {"A1": -0.2, "A3": +0.3},
                "layer_weights": {"L1": +0.5},
                "split": "H1",
            },
            {
                "text": "Долго не могу начать",
                "axis_weights": {"A1": -0.5},
                "layer_weights": {"L1": -0.4},
                "split": "H2",
            },
            {
                "text": "Откладываю без ясной причины",
                "axis_weights": {"A1": -0.3, "A2": -0.4},
                "layer_weights": {"L1": -0.5},
                "split": "H2",
            },
            {
                "text": "Включаюсь резко и быстро",
                "axis_weights": {"A1": +0.6},
                "layer_weights": {"L1": +0.6},
                "split": "H1",
            },
            {
                "text": "Начинаю, но быстро теряю темп",
                "axis_weights": {"A1": -0.3, "A3": -0.3},
                "layer_weights": {"L1": +0.2},
                "split": "conflict",
            },
        ],
    ),
    # ---- A1 × L2 -------------------------------------------------------
    _node(
        "A1_L2",
        "апатия vs скрытая тревожная активация",
        "В спокойный период без внешних событий вы чаще чувствуете:",
        [
            {
                "text": "Ровное спокойствие",
                "axis_weights": {"A1": 0.0},
                "layer_weights": {"L2": +0.3},
                "split": "neither",
            },
            {
                "text": "Снижение интереса",
                "axis_weights": {"A1": -0.6},
                "layer_weights": {"L2": -0.3},
                "split": "H1",
            },
            {
                "text": "Внутреннее напряжение",
                "axis_weights": {"A1": +0.3},
                "layer_weights": {"L2": +0.7},
                "split": "H2",
            },
            {
                "text": "Раздражительность",
                "axis_weights": {"A1": +0.4},
                "layer_weights": {"L2": +0.6},
                "split": "H2",
            },
            {
                "text": "Перепады настроения",
                "axis_weights": {"A1": +0.2},
                "layer_weights": {"L2": +0.5},
                "split": "conflict",
            },
        ],
    ),
    # ---- A1 × L3 -------------------------------------------------------
    _node(
        "A1_L3",
        "социальная усталость vs социальное избегание",
        "После общения с людьми вы чаще:",
        [
            {
                "text": "Быстро восстанавливаетесь",
                "axis_weights": {"A1": +0.3},
                "layer_weights": {"L3": +0.4},
                "split": "H1",
            },
            {
                "text": "Чувствуете усталость",
                "axis_weights": {"A1": -0.4},
                "layer_weights": {"L3": +0.2},
                "split": "H1",
            },
            {
                "text": "Предпочитаете сократить контакты",
                "axis_weights": {"A1": -0.2, "A2": -0.4},
                "layer_weights": {"L3": -0.6},
                "split": "H2",
            },
            {
                "text": "Ищете больше взаимодействия",
                "axis_weights": {"A1": +0.3},
                "layer_weights": {"L3": +0.6},
                "split": "neither",
            },
            {
                "text": "Становитесь раздражённым",
                "axis_weights": {"A1": +0.3},
                "layer_weights": {"L2": +0.5, "L3": +0.2},
                "split": "H2",
            },
        ],
    ),
    # ---- A1 × L4 -------------------------------------------------------
    _node(
        "A1_L4",
        "когнитивная заторможенность vs перегрузка",
        "Когда нужно сосредоточиться, что происходит?",
        [
            {
                "text": "Мысли текут медленно",
                "axis_weights": {"A1": -0.6},
                "layer_weights": {"L4": -0.3},
                "split": "H1",
            },
            {
                "text": "Трудно удерживать внимание",
                "axis_weights": {"A1": -0.3},
                "layer_weights": {"L4": -0.4},
                "split": "H1",
            },
            {
                "text": "Мыслей слишком много",
                "axis_weights": {"A1": +0.4},
                "layer_weights": {"L4": +0.6},
                "split": "H2",
            },
            {
                "text": "Легко структурирую информацию",
                "axis_weights": {"A1": +0.2},
                "layer_weights": {"L4": +0.5},
                "split": "neither",
            },
            {
                "text": "Перехожу от одной мысли к другой",
                "axis_weights": {"A1": +0.2, "A3": -0.3},
                "layer_weights": {"L4": +0.3},
                "split": "H2",
            },
        ],
    ),
    # ---- A2 × L0 -------------------------------------------------------
    _node(
        "A2_L0",
        "телесная тревога vs физиологический интерес",
        "Когда сталкиваетесь с чем-то новым и непредсказуемым, что на уровне тела?",
        [
            {
                "text": "Лёгкое возбуждение",
                "axis_weights": {"A2": +0.5},
                "layer_weights": {"L0": +0.4},
                "split": "H2",
            },
            {
                "text": "Напряжение в теле",
                "axis_weights": {"A2": -0.5},
                "layer_weights": {"L0": +0.7},
                "split": "H1",
            },
            {
                "text": "Учащается сердцебиение",
                "axis_weights": {"A2": -0.4},
                "layer_weights": {"L0": +0.6},
                "split": "H1",
            },
            {
                "text": "Ничего особенного",
                "axis_weights": {"A2": 0.0},
                "layer_weights": {"L0": +0.2},
                "split": "neither",
            },
            {
                "text": "Появляется интерес",
                "axis_weights": {"A2": +0.6},
                "layer_weights": {"L2": +0.4},
                "split": "H2",
            },
        ],
    ),
    # ---- A2 × L1 -------------------------------------------------------
    _node(
        "A2_L1",
        "откладывание vs тестирование малым шагом",
        "Если нет гарантии результата, вы чаще:",
        [
            {
                "text": "Пробуете с малого шага",
                "axis_weights": {"A2": +0.6},
                "layer_weights": {"L1": +0.5},
                "split": "H2",
            },
            {
                "text": "Ждёте более ясных условий",
                "axis_weights": {"A2": -0.3, "A3": +0.3},
                "layer_weights": {"L1": -0.2},
                "split": "H1",
            },
            {
                "text": "Откладываете решение",
                "axis_weights": {"A2": -0.6},
                "layer_weights": {"L1": -0.4},
                "split": "H1",
            },
            {
                "text": "Действуете сразу",
                "axis_weights": {"A2": +0.4, "A3": -0.4},
                "layer_weights": {"L1": +0.6},
                "split": "H2",
            },
            {
                "text": "Отказываетесь от идеи",
                "axis_weights": {"A2": -0.7},
                "layer_weights": {"L1": -0.6},
                "split": "H1",
            },
        ],
    ),
    # ---- A2 × L2 -------------------------------------------------------
    _node(
        "A2_L2",
        "тревога vs любопытство",
        "Когда исход ситуации неясен, вы чаще чувствуете:",
        [
            {
                "text": "Тревогу",
                "axis_weights": {"A2": -0.7},
                "layer_weights": {"L2": +0.7},
                "split": "H1",
            },
            {
                "text": "Раздражение",
                "axis_weights": {"A2": -0.4},
                "layer_weights": {"L2": +0.5},
                "split": "H1",
            },
            {
                "text": "Любопытство",
                "axis_weights": {"A2": +0.7},
                "layer_weights": {"L2": +0.5},
                "split": "H2",
            },
            {
                "text": "Безразличие",
                "axis_weights": {"A2": -0.2},
                "layer_weights": {"L2": -0.4},
                "split": "neither",
            },
            {
                "text": "Смесь интереса и напряжения",
                "axis_weights": {"A2": +0.2},
                "layer_weights": {"L2": +0.6},
                "split": "conflict",
            },
        ],
    ),
    # ---- A2 × L3 -------------------------------------------------------
    _node(
        "A2_L3",
        "избегание контакта vs активное прояснение",
        "Если не понимаете, как вас воспринимают другие, что происходит?",
        [
            {
                "text": "Стараюсь прояснить напрямую",
                "axis_weights": {"A2": +0.6},
                "layer_weights": {"L3": +0.7},
                "split": "H2",
            },
            {
                "text": "Начинаю анализировать детали",
                "axis_weights": {"A2": -0.3},
                "layer_weights": {"L3": +0.3, "L4": +0.5},
                "split": "H1",
            },
            {
                "text": "Избегаю контакта",
                "axis_weights": {"A2": -0.7},
                "layer_weights": {"L3": -0.6},
                "split": "H1",
            },
            {
                "text": "Ничего не меняю",
                "axis_weights": {"A2": 0.0},
                "layer_weights": {"L3": +0.2},
                "split": "neither",
            },
            {
                "text": "Становлюсь осторожнее",
                "axis_weights": {"A2": -0.4},
                "layer_weights": {"L3": -0.3},
                "split": "H1",
            },
        ],
    ),
    # ---- A2 × L4 -------------------------------------------------------
    _node(
        "A2_L4",
        "катастрофизация vs гипотезирование",
        "Когда не знаете, чем закончится ситуация, вы чаще:",
        [
            {
                "text": "Представляете негативные сценарии",
                "axis_weights": {"A2": -0.7},
                "layer_weights": {"L4": +0.6},
                "split": "H1",
            },
            {
                "text": "Продумываете разные варианты",
                "axis_weights": {"A2": +0.3},
                "layer_weights": {"L4": +0.7},
                "split": "H2",
            },
            {
                "text": "Откладываете размышления",
                "axis_weights": {"A2": -0.5},
                "layer_weights": {"L4": -0.4},
                "split": "H1",
            },
            {
                "text": "Считаете, что разберётесь по ходу",
                "axis_weights": {"A2": +0.5},
                "layer_weights": {"L4": -0.2},
                "split": "H2",
            },
            {
                "text": "Строите несколько возможных планов",
                "axis_weights": {"A2": +0.4},
                "layer_weights": {"L4": +0.8},
                "split": "H2",
            },
        ],
    ),
    # ---- A3 × L0 -------------------------------------------------------
    _node(
        "A3_L0",
        "высокая реактивность vs стабильность",
        "Когда что-то неожиданное происходит, ваше тело чаще:",
        [
            {
                "text": "Быстро реагирует",
                "axis_weights": {"A3": -0.6},
                "layer_weights": {"L0": +0.6},
                "split": "H1",
            },
            {
                "text": "Почти не меняется",
                "axis_weights": {"A3": +0.3},
                "layer_weights": {"L0": +0.3},
                "split": "H2",
            },
            {
                "text": "Сначала резко, потом быстро успокаивается",
                "axis_weights": {"A3": -0.3},
                "layer_weights": {"L0": +0.5},
                "split": "H1",
            },
            {
                "text": "Долго остаётся напряжённым",
                "axis_weights": {"A3": +0.2},
                "layer_weights": {"L0": +0.7},
                "split": "conflict",
            },
            {
                "text": "Трудно понять реакцию",
                "axis_weights": {"A3": 0.0},
                "layer_weights": {"L0": +0.2, "L2": -0.4},
                "split": "neither",
            },
        ],
    ),
    # ---- A3 × L1 -------------------------------------------------------
    _node(
        "A3_L1",
        "сказал сразу vs сделал паузу",
        "Если вас задели, вы чаще:",
        [
            {
                "text": "Отвечаете сразу",
                "axis_weights": {"A3": -0.7},
                "layer_weights": {"L1": +0.6},
                "split": "H1",
            },
            {
                "text": "Делаете паузу перед ответом",
                "axis_weights": {"A3": +0.6},
                "layer_weights": {"L1": +0.3},
                "split": "H2",
            },
            {
                "text": "Ничего не говорите",
                "axis_weights": {"A3": +0.4},
                "layer_weights": {"L1": -0.5, "L2": +0.3},
                "split": "H2",
            },
            {
                "text": "Возвращаетесь к разговору позже",
                "axis_weights": {"A3": +0.5},
                "layer_weights": {"L1": +0.2, "L4": +0.4},
                "split": "H2",
            },
            {
                "text": "Меняете тему",
                "axis_weights": {"A3": +0.2, "A2": -0.3},
                "layer_weights": {"L1": +0.2},
                "split": "conflict",
            },
        ],
    ),
    # ---- A3 × L2 -------------------------------------------------------
    _node(
        "A3_L2",
        "вспышка vs выдерживание",
        "Когда возникает сильная эмоция, что происходит?",
        [
            {
                "text": "Она быстро проявляется",
                "axis_weights": {"A3": -0.6},
                "layer_weights": {"L2": +0.6},
                "split": "H1",
            },
            {
                "text": "Я стараюсь её сдержать",
                "axis_weights": {"A3": +0.5},
                "layer_weights": {"L2": +0.3},
                "split": "H2",
            },
            {
                "text": "Она накапливается внутри",
                "axis_weights": {"A3": +0.3},
                "layer_weights": {"L2": +0.7},
                "split": "conflict",
            },
            {
                "text": "Быстро проходит",
                "axis_weights": {"A3": -0.2},
                "layer_weights": {"L2": +0.2},
                "split": "H1",
            },
            {
                "text": "Мне трудно понять, что я чувствую",
                "axis_weights": {"A3": 0.0},
                "layer_weights": {"L2": -0.6},
                "split": "neither",
            },
        ],
    ),
    # ---- A3 × L3 -------------------------------------------------------
    _node(
        "A3_L3",
        "импульс vs социальное торможение",
        "В группе людей вы чаще:",
        [
            {
                "text": "Говорите первым",
                "axis_weights": {"A3": -0.5},
                "layer_weights": {"L3": +0.6},
                "split": "H1",
            },
            {
                "text": "Ждёте, пока скажут другие",
                "axis_weights": {"A3": +0.4},
                "layer_weights": {"L3": +0.3},
                "split": "H2",
            },
            {
                "text": "Вступаете, если уверены",
                "axis_weights": {"A3": +0.3},
                "layer_weights": {"L3": +0.4, "L4": +0.3},
                "split": "H2",
            },
            {
                "text": "Сдерживаете мнение",
                "axis_weights": {"A3": +0.5},
                "layer_weights": {"L3": -0.3},
                "split": "H2",
            },
            {
                "text": "Говорите, а потом сомневаетесь",
                "axis_weights": {"A3": -0.3},
                "layer_weights": {"L3": +0.2, "L2": +0.4},
                "split": "conflict",
            },
        ],
    ),
    # ---- A3 × L4 -------------------------------------------------------
    _node(
        "A3_L4",
        "рационализация постфактум vs осмысление до действия",
        "Перед важным решением вы чаще:",
        [
            {
                "text": "Решаете быстро",
                "axis_weights": {"A3": -0.5},
                "layer_weights": {"L4": -0.2},
                "split": "H1",
            },
            {
                "text": "Обдумываете несколько вариантов",
                "axis_weights": {"A3": +0.5},
                "layer_weights": {"L4": +0.7},
                "split": "H2",
            },
            {
                "text": "Возвращаетесь к решению несколько раз",
                "axis_weights": {"A3": +0.3},
                "layer_weights": {"L4": +0.5},
                "split": "conflict",
            },
            {
                "text": "Доверяете первому импульсу",
                "axis_weights": {"A3": -0.6},
                "layer_weights": {"L4": -0.3},
                "split": "H1",
            },
            {
                "text": "Затягиваете решение",
                "axis_weights": {"A3": +0.4},
                "layer_weights": {"L4": +0.3},
                "split": "H2",
            },
        ],
    ),
    # ---- A4 × L0 -------------------------------------------------------
    _node(
        "A4_L0",
        "снять дискомфорт vs выдержать",
        "Когда возникает неприятное ощущение, вы чаще:",
        [
            {
                "text": "Стараетесь быстро его снять",
                "axis_weights": {"A4": -0.6},
                "layer_weights": {"L0": +0.5},
                "split": "H1",
            },
            {
                "text": "Терпите, если нужно",
                "axis_weights": {"A4": +0.6},
                "layer_weights": {"L0": +0.3},
                "split": "H2",
            },
            {
                "text": "Переключаетесь на другое",
                "axis_weights": {"A4": -0.4},
                "layer_weights": {"L0": +0.2, "L1": +0.3},
                "split": "H1",
            },
            {
                "text": "Уменьшаете нагрузку постепенно",
                "axis_weights": {"A4": +0.4},
                "layer_weights": {"L0": +0.3, "L4": +0.3},
                "split": "H2",
            },
            {
                "text": "Не замечаете сразу",
                "axis_weights": {"A4": 0.0},
                "layer_weights": {"L0": -0.3, "L2": -0.3},
                "split": "neither",
            },
        ],
    ),
    # ---- A4 × L1 -------------------------------------------------------
    _node(
        "A4_L1",
        "откладывание vs разбивка на шаги",
        "Если задача требует времени, вы чаще:",
        [
            {
                "text": "Делите на небольшие шаги",
                "axis_weights": {"A4": +0.7},
                "layer_weights": {"L1": +0.5, "L4": +0.3},
                "split": "H2",
            },
            {
                "text": "Откладываете на потом",
                "axis_weights": {"A4": -0.6},
                "layer_weights": {"L1": -0.4},
                "split": "H1",
            },
            {
                "text": "Делаете всё сразу",
                "axis_weights": {"A4": -0.2, "A3": -0.4},
                "layer_weights": {"L1": +0.6},
                "split": "H1",
            },
            {
                "text": "Ждёте подходящего момента",
                "axis_weights": {"A4": -0.3},
                "layer_weights": {"L1": -0.2},
                "split": "H1",
            },
            {
                "text": "Теряете интерес",
                "axis_weights": {"A4": -0.5},
                "layer_weights": {"L1": -0.5, "L2": -0.3},
                "split": "H1",
            },
        ],
    ),
    # ---- A4 × L2 -------------------------------------------------------
    _node(
        "A4_L2",
        "избежать неприятного vs терпеть ради результата",
        "Если для результата нужно пройти через неприятный этап, вы чаще:",
        [
            {
                "text": "Готовы потерпеть",
                "axis_weights": {"A4": +0.7},
                "layer_weights": {"L2": +0.3},
                "split": "H2",
            },
            {
                "text": "Ищете более лёгкий путь",
                "axis_weights": {"A4": -0.5},
                "layer_weights": {"L2": +0.2},
                "split": "H1",
            },
            {
                "text": "Теряете мотивацию",
                "axis_weights": {"A4": -0.6},
                "layer_weights": {"L2": -0.3},
                "split": "H1",
            },
            {
                "text": "Испытываете раздражение",
                "axis_weights": {"A4": -0.3},
                "layer_weights": {"L2": +0.6},
                "split": "conflict",
            },
            {
                "text": "Становится тревожно",
                "axis_weights": {"A4": -0.2},
                "layer_weights": {"L2": +0.7},
                "split": "conflict",
            },
        ],
    ),
    # ---- A4 × L3 -------------------------------------------------------
    _node(
        "A4_L3",
        "реакция здесь-и-сейчас vs учёт последствий",
        "В общении вы чаще:",
        [
            {
                "text": "Думаете о последствиях слов",
                "axis_weights": {"A4": +0.6},
                "layer_weights": {"L3": +0.5},
                "split": "H2",
            },
            {
                "text": "Реагируете по ситуации",
                "axis_weights": {"A4": -0.4, "A3": -0.3},
                "layer_weights": {"L3": +0.3},
                "split": "H1",
            },
            {
                "text": "Позже жалеете о сказанном",
                "axis_weights": {"A4": -0.5},
                "layer_weights": {"L3": +0.2, "L2": +0.4},
                "split": "H1",
            },
            {
                "text": "Стараетесь сгладить эффект",
                "axis_weights": {"A4": +0.3},
                "layer_weights": {"L3": +0.4},
                "split": "H2",
            },
            {
                "text": "Не задумываетесь о будущем влиянии",
                "axis_weights": {"A4": -0.6},
                "layer_weights": {"L3": -0.2},
                "split": "H1",
            },
        ],
    ),
    # ---- A4 × L4 -------------------------------------------------------
    _node(
        "A4_L4",
        "короткий цикл vs структурированный горизонт",
        "Когда строите планы, что чаще происходит?",
        [
            {
                "text": "Есть ориентир на несколько лет",
                "axis_weights": {"A4": +0.8},
                "layer_weights": {"L4": +0.7},
                "split": "H2",
            },
            {
                "text": "Планирую только ближайшее",
                "axis_weights": {"A4": -0.6},
                "layer_weights": {"L4": -0.4},
                "split": "H1",
            },
            {
                "text": "Возвращаюсь к прошлым ошибкам",
                "axis_weights": {"A4": -0.7},
                "layer_weights": {"L4": +0.8},
                "split": "H1",
            },
            {
                "text": "Строю несколько сценариев",
                "axis_weights": {"A4": +0.6},
                "layer_weights": {"L4": +0.8},
                "split": "H2",
            },
            {
                "text": "Избегаю долгосрочных планов",
                "axis_weights": {"A4": -0.7},
                "layer_weights": {"L4": -0.5},
                "split": "H1",
            },
        ],
    ),
]

# Quick-access index for Phase 2 templates
_PHASE2_INDEX: dict[str, dict] = {t["node"]: t for t in PHASE2_TEMPLATES}
